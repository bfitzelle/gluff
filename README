
Welcome to Gluff!

On the DB server:

In terms of Ubuntu packages, you will need mysql-server, and you will also probably want to set up
phpmyadmin, which will happily give you apache, php5-mysql and other stuff.

 * Configure mysql to listen to network interfaces - check "bind-address" in /etc/mysql/my.cnf or wherever it is.
 * Create a database (here called dhcpd_leases), and a user with permission to connect from the DHCP servers:
    create database dhcpd_leases
    grant all on dhcpd_leases.* to 'dhcpd'@'192.168.10.10' identified by 'foobar'
    grant all on dhcpd_leases.* to 'dhcpd'@'192.168.11.10' identified by 'foobar'
 * Create the tables, using the commands in dhcpd_leases.sql


On the DHCP servers:

You will want at least the following: libmysqlclient15-dev, libmysqlclient15off, libsqlite3-dev
Optional are mysql-client and sqlite3
To compile stuff, you also need gcc, build-essentials and possibly more stuff, like kernel headers

 * Patch dhcpd-4.1.0a1, build, install and run it with the -ldb parameter to point out an sqlite3 database, here "/var/db/dhcpd_queue.db3"
 * Configure, build and install gluff
 * Run gluff with the following command
       /opt/gluff/bin/gluff -l /var/db/dhcpd_queue.db3 -h 192.168.15.10 -udhcpd -pfoobar -ddhcpd_leases -R
   where 192.168.15.10 is the address of the DB server.

gluff logs to "local2" so you can set up syslog to handle it according to your wishes.


/Hans@Liss.pp.se 2008-07-14
